$(function(){function t(t){t?($(".g-nav, .g-xs-header .icon-menu, .mask-nav").addClass("active"),$("body").addClass("move-right")):($(".g-nav, .g-xs-header .icon-menu, .mask-nav").removeClass("active"),$("body").removeClass("move-right"))}function a(){var t=window.location.pathname.split("/");2===t.length&&i(DATA),""===t[2]&&-1===["nav","about"].indexOf(t[1])&&i(e(t[1])),o()}function n(t){window.history.pushState({title:t.title},"",t.href);var a=window.location.pathname.split("/");""===a[1]&&i(DATA),""===a[2]&&-1===["nav","about"].indexOf(a[1])&&i(e(a[1])),(a[2]||""===a[2]&&-1!==["nav","about"].indexOf(a[1]))&&l.load(t.href+" #g-content"),o()}function i(t){var a='<ul class="m-list">';$.each(t,function(t,n){a+='<li data-href="'+n.url+'" data-title="'+n.title+'"><span class="title">'+n.title+'</span><span class="time">'+n.date+"</span></li>"}),a+="</ul>",l.html(a)}function e(t){var a=[];return $.each(DATA,function(n,i){i.categories===t&&a.push(i)}),a}function o(){var t=window.location.pathname.split("/");$(".g-nav li").removeClass("active"),$('.g-nav li[data-href="/'+(""==t[1]?"":t[1]+"/")+'"]').addClass("active").siblings().removeClass("active"),document.title=$('.g-nav li[data-href="/'+(""==t[1]?"":t[1]+"/")+'"]').data("title")}var l=$("#g-content");a(),$("#g-content").on("click",".m-list li",function(){var a=$(this).data("href");n({href:a,title:$(this).data("title")}),document.title=$(this).data("title"),t()}),$(".g-nav").on("click","li",function(){var a=$(this).data("href");return a===window.location.pathname?!1:(n({href:a,title:$(this).data("title")}),document.title=$(this).data("title"),void t())}),$(".g-header .brand, .g-xs-header .title").click(function(){return"/"===window.location.pathname?!1:(window.history.pushState({},"","/"),n({url:"/",title:"WEB前端开发"}),void t())}),$(window).on("popstate",function(n){document.title=n.state?n.state.title:"WEB前端开发",a();var i=window.location.pathname.split("/");i[2]&&l.load(window.location.href+" #g-content"),t()}),$(".g-xs-header .icon-menu").click(function(){t(!0)}),$(".mask-nav").click(function(){t()})});