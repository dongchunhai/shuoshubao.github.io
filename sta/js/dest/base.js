$(function(){function t(t){t?($(".g-nav, .g-xs-header .icon-menu, .mask-nav").addClass("active"),$("body").addClass("move-right")):($(".g-nav, .g-xs-header .icon-menu, .mask-nav").removeClass("active"),$("body").removeClass("move-right"))}function n(){var t=window.location.pathname.split("/");2===t.length&&i(DATA),""===t[2]&&-1===["nav","about"].indexOf(t[1])&&i(e(t[1])),o()}function a(t){window.history.pushState({title:t.title},"",t.href);var n=window.location.pathname.split("/");""===n[1]&&i(DATA),""===n[2]&&-1===["nav","about"].indexOf(n[1])&&i(e(n[1])),(n[2]||""===n[2]&&-1!==["nav","about"].indexOf(n[1]))&&l.load(t.href+" #g-content"),o()}function i(t){var n='<ul class="m-list">';$.each(t,function(t,a){n+='<li data-href="'+a.url+'" data-title="'+a.title+'"><span class="title">'+a.title+'</span><span class="time">'+a.date+"</span></li>"}),n+="</ul>",l.html(n)}function e(t){var n=[];return $.each(DATA,function(a,i){i.categories===t&&n.push(i)}),n}function o(){var t=window.location.pathname.split("/");$(".g-nav li").removeClass("active"),$('.g-nav li[data-href="/'+(""==t[1]?"":t[1]+"/")+'"]').addClass("active").siblings().removeClass("active")}var l=$("#g-content");n(),$("#g-content").on("click",".m-list li",function(){var n=$(this).data("href");a({href:n,title:$(this).data("title")}),t()}),$(".g-nav").on("click","li",function(){var n=$(this).data("href");return n===window.location.pathname?!1:(a({href:n,title:n.split("/")[1]||"WEB前端开发"}),document.title=n.split("/")[1]||"WEB前端开发",void t())}),$(".g-header .brand, .g-xs-header .title").click(function(){return"/"===window.location.pathname?!1:(window.history.pushState({},"","/"),a({url:"/",title:"WEB前端开发"}),void t())}),$(window).on("popstate",function(a){console.log(a.state.title),document.title=a.state.title||"WEB前端开发",n();var i=window.location.pathname.split("/");i[2]&&l.load(window.location.href+" #g-content"),t()}),$(".g-xs-header .icon-menu").click(function(){t(!0)}),$(".mask-nav").click(function(){t()})});